import { Composer, InlineKeyboard } from 'grammy';
import { MyContext } from '../middlewares/userMiddleware';
import { mainMenu } from '../keyboards';

const composer = new Composer<MyContext>();

composer.command('start', async (ctx) => {
  const welcomeText = `üëã –ü—Ä–∏–≤–µ—Ç, ${ctx.from?.first_name}!

–Ø - –±–æ—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–≤–æ–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è. –°–æ –º–Ω–æ–π —Ç—ã —Å–º–æ–∂–µ—à—å:

üìù *–í–µ—Å—Ç–∏ –¥–Ω–µ–≤–Ω–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è* - –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è
‚è∞ *–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è* - —É—Ç—Ä–µ–Ω–Ω–∏–µ –∏ –≤–µ—á–µ—Ä–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è  
üìä *–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏* - –≤–∏–¥–µ—Ç—å —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ–º
üîç *–ù–∞—Ö–æ–¥–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã* - –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

*–î–∞–≤–∞–π —Å—Ä–∞–∑—É –Ω–∞—Å—Ç—Ä–æ–∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è!* –í—ã–±–µ—Ä–∏ —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –∏ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è.`;

  await ctx.reply(welcomeText, { 
    parse_mode: 'Markdown'
  });

  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
  const { showMainSettings } = await import('./settings');
  await showMainSettings(ctx);
});

export default composer;